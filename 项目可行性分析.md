# 项目可行性分析

仅考虑技术可行性。

1. 应用界面：EasyX

   项目组 6 人都会使用 EasyX，其中有 2 人不太熟悉

2. 核心功能：

   - 移动：飞机可以上下左右移动，玩家可通过键盘操作
   - 攻击：飞机按照固定间隔发射子弹
   - 生命值：初始时飞机拥有 x 条生命
   - 边界限制：飞机无法飞出边界
   - 敌机生成：在固定时间间隔随机位置生成敌方飞机
   - 敌机移动：固定速度竖直向下移动
   - 敌机攻击：敌方飞机以固定时间间隔发射子弹
   - 碰撞：当飞机与敌机或子弹碰撞时，生命值 -1，敌机或子弹消失，飞机进入 x 秒无敌时间。
   - 死亡：当飞机生命值归零时，游戏结束

   扩展功能：可行性分析不考虑扩展功能。

3. 项目实现

   1. 数据设计

      ```C++
      // 我方飞机
      class Plane {
          // 生命
          int hp;
          int x, y;
          // 无敌时间倒计时（每帧减少1）,归零前飞机不会受伤
          int powerCount;
      };
      
      // 敌机
      class Anemy {
          // 坐标
          int hp;
          int x, y;
      };
      
      // 我机子弹
      class Playerbullet {
          int x, y;
      };
      
      // 敌机子弹
      class AnemyBullet {
          int x, y;
      };
      
      // 当前存在的敌人数量
      int enemyNum;
      // 存放所有敌人
      Anemy enemy[100];
      
      
      // 我方飞机发射的所有子弹的数量
      int bulletNum;
      // 我方飞机发射的所有子弹
      Playerbullet bullet[100];
      
      
      // 敌方飞机发射的所有子弹的数量
      int enemyBulletNum;
      // 敌方飞机发射的所有子弹
      AnemyBullet enemyBullet[100];
      ```
   
      
   
   2. 功能设计
   
      - 移动：
   
        检测玩家按键输入（w a s d），根据输入将飞机坐标 `plane` 向指定的方向移动 x 个单位。
   
      - 攻击：
   
        固定间隔生成一个新的子弹加入 `bullet[]` 数组末尾，坐标为飞机正前方 x 个单位，`bulletNum` 加 1。
   
      - 生命值：
   
        进入游戏时，令 `plane.hp = x`
   
      - 边界限制：
   
        以玩家操纵飞机向 x 正方向移动为例，设移动后的坐标为 `(x+a, y)` ，若此时 `x+a > maxX`，`maxX` 为坐标最大值，则移动后的坐标设为 `(maxX, y)`
   
        其它方向同理。
   
      - 敌机生成：
   
        每隔固定时间，生成一个新的敌机加入 `enemy[]` 数组末尾，坐标为 `(rand(), 0)`，`enemyNum` 加 1
   
      - 敌机攻击：
   
        遍历所有敌机 `enemy[]`，随机生成一个新的敌机子弹加入 `enemyBullet[]` 数组，坐标为当前遍历到的敌机坐标正前方 x 个单位。
   
      - 碰撞：
   
        设我方飞机与敌方飞机碰撞体积均为正方形，边长为 x。
   
        遍历所有敌机 `enemy[]` ，若我机坐标与敌机坐标的切比雪夫距离小于 x，则视为与敌机碰撞，生命值 -1，敌机消失，`plane.powerCount = 50`，接下来 50 帧内飞机无敌。
      
        遍历所有敌机子弹 `enemyBullet[]` ，若我机坐标与敌机子弹坐标的切比雪夫距离小于 x/2，则视为与子弹碰撞，生命值 -1，子弹消失，`plane.powerCount = 50`，接下来 50 帧内飞机无敌。
      
        > 切雪比夫距离指 x 坐标差与 y 坐标差的最大值，即：
        >
        > $d = max(|x_1-x_2|, |y_1-y_2|)$
      
      - 死亡：当飞机生命值归零时，游戏结束